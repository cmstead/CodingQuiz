<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <link href="https://fonts.googleapis.com/css?family=Amatic+SC:700|Josefin+Sans&display=swap" rel="stylesheet" />

    <link rel="stylesheet" href="./style.css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
        integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <title>Scoreboard</title>
</head>

<body>

    <header>
    </header>

    <div class="container">

        <h1>Scoreboard</h1>



        <div class="row scores">
            <form id="score-form" method="POST">
                <label for="score-text">Scoreboard:</label>
                <input type="text" placeholder="Enter your name" name="score-text" id="score-text" />
            </form>
            <p>Score Count: <span id="score-count">0</span></p>
            <ul id="score-list"></ul>
        </div>


        <div class="row">
            <div class="col-3"> </div>
            <div class="col-3">
                <a href="../index.html" id="back">go back</a>
            </div>
            <div class="col-3">
                <button id="clear scores">clear scores</button>
            </div>
            <div class="col-3"> </div>

        </div> 

    </div>


    <script>
        var scoreInput = document.querySelector("#score-text");
        var scoreForm = document.querySelector("#score-form");
        var scoreList = document.querySelector("#score-list");
        var scoreSpan = document.querySelector("#score-count");

        var scores = [];

        init();

        function renderScores() {
            // Clear scoreList element and update todoCountSpan
            scoreList.innerHTML = "";
            scoreCountSpan.textContent = scores.length;

            // Render a new li for each todo
            for (var i = 0; i < scores.length; i++) {
                var score = scores[i];

                var li = document.createElement("li");
                li.textContent = score;
                li.setAttribute("data-index", i);

                var button = document.createElement("button");
                button.textContent = "Complete";

                li.appendChild(button);
                scoreList.appendChild(li);
            }
        }

        function init() {
            // Get stored todos from localStorage
            // Parsing the JSON string to an object
            var storedScores = JSON.parse(localStorage.getItem("scores"));

            // If todos were retrieved from localStorage, update the todos array to it
            if (storedScores !== null) {
                scores = storedScores;
            }

            // Render todos to the DOM
            renderScores();
        }

        function storeScores() {
            // Stringify and set "todos" key in localStorage to todos array
            localStorage.setItem("scores", JSON.stringify(scores));
        }

        // When form is submitted...
        scoreForm.addEventListener("submit", function (event) {
            event.preventDefault();

            var scoreText = scoreInput.value.trim();

            // Return from function early if submitted todoText is blank
            if (scoreText === "") {
                return;
            }

            // Add new todoText to todos array, clear the input
            scores.push(scoreText);
            scoreInput.value = "";

            // Store updated todos in localStorage, re-render the list
            storeScores();
            renderScores();
        });

        // When a element inside of the scoreList is clicked...
        scoreList.addEventListener("click", function (event) {
            var element = event.target;

            // If that element is a button...
            if (element.matches("button") === true) {
                // Get its data-index value and remove the todo element from the list
                var index = element.parentElement.getAttribute("data-index");
                scores.splice(index, 1);

                // Store updated todos in localStorage, re-render the list
                storeScores();
                renderScores();
            }
        });
    </script>

</body>

</html>